-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.address
(
    id uuid NOT NULL,
    city character varying(255) COLLATE pg_catalog."default",
    country character varying(255) COLLATE pg_catalog."default",
    district character varying(255) COLLATE pg_catalog."default",
    neighborhood character varying(255) COLLATE pg_catalog."default",
    postal_or_zipcode character varying(255) COLLATE pg_catalog."default",
    state character varying(255) COLLATE pg_catalog."default",
    street_no character varying(255) COLLATE pg_catalog."default",
    customer_id uuid,
    CONSTRAINT address_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.brand
(
    id uuid NOT NULL,
    headquarters_location character varying(255) COLLATE pg_catalog."default",
    logo_imageurl character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    origin_country character varying(255) COLLATE pg_catalog."default",
    parent_company character varying(255) COLLATE pg_catalog."default",
    popular_models character varying(255)[] COLLATE pg_catalog."default",
    websiteurl character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT brand_pkey PRIMARY KEY (id),
    CONSTRAINT uk_rdxh7tq2xs66r485cc8dkxt77 UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.car
(
    id uuid NOT NULL,
    additional_description character varying(255) COLLATE pg_catalog."default",
    color character varying(255) COLLATE pg_catalog."default",
    daily_rental_price double precision NOT NULL,
    daily_rental_rate double precision NOT NULL,
    hourly_rental_price double precision NOT NULL,
    is_available boolean NOT NULL,
    manufacturing_year integer NOT NULL,
    mileage double precision NOT NULL,
    monthly_rental_price double precision NOT NULL,
    monthly_rental_rate double precision NOT NULL,
    per_kilometer_rental_price double precision NOT NULL,
    plate character varying(255) COLLATE pg_catalog."default",
    weekly_rental_price double precision NOT NULL,
    weekly_rental_rate double precision NOT NULL,
    yearly_rental_rate double precision NOT NULL,
    insurance_id uuid,
    model_id uuid NOT NULL,
    CONSTRAINT car_pkey PRIMARY KEY (id),
    CONSTRAINT uk_awr1h82om7d6i8yfxgice3vnd UNIQUE (insurance_id),
    CONSTRAINT uk_pvp69n7acjyr5racokd4pdr4t UNIQUE (plate)
);

CREATE TABLE IF NOT EXISTS public.customer
(
    id uuid NOT NULL,
    email character varying(255) COLLATE pg_catalog."default",
    first_name character varying(255) COLLATE pg_catalog."default",
    last_name character varying(255) COLLATE pg_catalog."default",
    phone_number character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT customer_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.insurance
(
    id uuid NOT NULL,
    breakdown_assistance boolean NOT NULL,
    comprehensive_insurance boolean NOT NULL,
    end_date date,
    fire_insurance boolean NOT NULL,
    glass_insurance boolean NOT NULL,
    insurance_company character varying(255) COLLATE pg_catalog."default",
    policy_number character varying(255) COLLATE pg_catalog."default" NOT NULL,
    roadside_assistance boolean NOT NULL,
    start_date date,
    theft_insurance boolean NOT NULL,
    CONSTRAINT insurance_pkey PRIMARY KEY (id),
    CONSTRAINT uk_7rbxwbe5osbdxdxv1nx6xp5q4 UNIQUE (policy_number)
);

CREATE TABLE IF NOT EXISTS public.model
(
    id uuid NOT NULL,
    eco_friendly boolean NOT NULL,
    engine_type character varying(255) COLLATE pg_catalog."default",
    market_segment character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default",
    seating_capacity integer NOT NULL,
    brand_id uuid,
    CONSTRAINT model_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.payment
(
    id uuid NOT NULL,
    amount numeric(38, 2),
    payment_date timestamp(6) without time zone,
    payment_method character varying(255) COLLATE pg_catalog."default",
    rental_id uuid NOT NULL,
    CONSTRAINT payment_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.rental
(
    id uuid NOT NULL,
    total_cost double precision NOT NULL,
    car_id uuid NOT NULL,
    customer_id uuid NOT NULL,
    CONSTRAINT rental_pkey PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public.address
    ADD CONSTRAINT fk93c3js0e22ll1xlu21nvrhqgg FOREIGN KEY (customer_id)
    REFERENCES public.customer (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.car
    ADD CONSTRAINT fk19corei19ty48kmynu84qkv1a FOREIGN KEY (insurance_id)
    REFERENCES public.insurance (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;
CREATE INDEX IF NOT EXISTS uk_awr1h82om7d6i8yfxgice3vnd
    ON public.car(insurance_id);


ALTER TABLE IF EXISTS public.car
    ADD CONSTRAINT fk772uqy9hm5yicyxh9t6x6vusr FOREIGN KEY (model_id)
    REFERENCES public.model (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.model
    ADD CONSTRAINT fkhbgv4j3vpt308sepyq9q79mhu FOREIGN KEY (brand_id)
    REFERENCES public.brand (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.payment
    ADD CONSTRAINT fk6ma2j46gjbggrp573uya2ub45 FOREIGN KEY (rental_id)
    REFERENCES public.rental (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.rental
    ADD CONSTRAINT fk7jf1f7b8w6jotl5qw1kxn8114 FOREIGN KEY (customer_id)
    REFERENCES public.customer (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.rental
    ADD CONSTRAINT fkqoq449d7f5x3a9as634tj4l4b FOREIGN KEY (car_id)
    REFERENCES public.car (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;